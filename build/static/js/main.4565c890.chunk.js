(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(13),o=n.n(c),u=n(2),l=function(e){var t=e.handle;return r.a.createElement("div",null,r.a.createElement("input",{onChange:t}))},i=function(e){var t=e.handleAdd,n=e.handlePerson,a=e.handleNumber;return r.a.createElement("form",{onSubmit:t},r.a.createElement("div",null,"name: ",r.a.createElement("input",{onChange:n})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{onChange:a})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},d=function(e){var t=e.list,n=e.handleDeletion;return t.map((function(e){return r.a.createElement("div",{key:e.name},e.name," ",e.number,r.a.createElement("button",{onClick:function(){return n(e.name,e.id)}},"delete"))}))},m=n(3),f=n.n(m),s="/api/persons",h={getAll:function(){return f.a.get(s).then((function(e){return e.data}))},create:function(e){return f.a.post(s,e).then((function(e){return e.data}))},update:function(e,t){return f.a.put("".concat(s,"/").concat(e),t).then((function(e){return e.data}))},deleteNumber:function(e){return f.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))}},b=function(e){var t=e.message,n=e.type;return null===t?null:r.a.createElement("div",{className:n},t)},p=function(e){var t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],o=n[1],m=Object(a.useState)(""),f=Object(u.a)(m,2),s=f[0],p=f[1],v=Object(a.useState)(""),E=Object(u.a)(v,2),g=E[0],j=E[1],w=Object(a.useState)(""),O=Object(u.a)(w,2),k=O[0],y=O[1],C=Object(a.useState)(null),N=Object(u.a)(C,2),S=N[0],A=N[1],D=Object(a.useState)(""),L=Object(u.a)(D,2),T=L[0],I=L[1];Object(a.useEffect)((function(){h.getAll().then((function(e){o(e)}))}),[]);var P=c.filter((function(e){return e.name.toLowerCase().startsWith(k.toLowerCase())}));return r.a.createElement("div",{className:"App"},r.a.createElement("h2",null,"Phonebook"),r.a.createElement(b,{message:S,type:T}),r.a.createElement(l,{handle:function(e){y(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(i,{handleAdd:function(e){e.preventDefault();var t=c.filter((function(e){return e.name.toLowerCase().startsWith(s.toLowerCase())}));if(console.log(t.length),0===t.length){var n={name:s,number:g,id:c.length+1};h.create(n).then((function(e){o(c.concat(e)),p(""),j(""),A("Added ".concat(s)),I("success"),setTimeout((function(){A(null)}),5e3)}))}else if(window.confirm("".concat(s," is already added to phonebook, replace old number with new one?"))){var a=t[0].name,r=g,u=t[0].id,l={name:a,number:r,id:u};h.update(l.id,l).then((function(e){o(c.map((function(t){return t.id!==l.id?t:e}))),A("Updated ".concat(l.name," phone")),I("success"),setTimeout((function(){A(null)}),5e3)})).catch((function(e){I("error"),A("Information of ".concat(a," has already been removed from server")),setTimeout((function(){A(null)}),5e3),o(c.filter((function(e){return e.id!==u})))}))}},handlePerson:function(e){p(e.target.value)},handleNumber:function(e){j(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(d,{list:P,handleDeletion:function(e,t){window.confirm("Delete ".concat(e,"?"))&&h.deleteNumber(t).then((function(e){o(c.filter((function(e){return e.id!==t})))})).catch((function(n){I("error"),A("Information of ".concat(e," has already been removed from server")),setTimeout((function(){A(null)}),5e3),o(c.filter((function(e){return e.id!==t})))}))}}))};n(35);o.a.render(r.a.createElement(p,null),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.4565c890.chunk.js.map